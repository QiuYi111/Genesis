2025-07-06 17:59:17.720 | SUCCESS  | sociology_simulation.prompts:load_from_config:399 - 从 sociology_simulation/conf/prompts.yaml 加载了 12 个提示词模板
2025-07-06 17:59:17.720 | INFO     | __main__:main:84 - Applying MCP integration to replace JSON generation with structured tool calls...
2025-07-06 17:59:17.721 | INFO     | sociology_simulation.mcp_integration_patch:apply_mcp_integration:220 - Applying MCP integration...
2025-07-06 17:59:17.721 | INFO     | sociology_simulation.mcp_integration_patch:_patch_agent_actions:285 - Agent actions patched for MCP
2025-07-06 17:59:17.721 | INFO     | sociology_simulation.mcp_integration_patch:_patch_trinity_rules:319 - Trinity rule generation patched for MCP
2025-07-06 17:59:17.721 | SUCCESS  | sociology_simulation.mcp_integration_patch:apply_mcp_integration:237 - MCP integration applied successfully
2025-07-06 17:59:17.721 | INFO     | __main__:main:88 - MCP integration applied - LLM will now use structured tools instead of JSON
2025-07-06 17:59:17.721 | INFO     | __main__:main:90 - Starting sociology simulation with Hydra configuration
2025-07-06 17:59:17.721 | INFO     | __main__:main:91 - Initialized 12 prompt templates
2025-07-06 17:59:17.721 | INFO     | __main__:main:92 - Prompt statistics: {'total_templates': 12, 'json_templates': 8, 'categories': {'agent': 3, 'trinity': 5, 'action': 2, 'json': 1, 'rule': 1}}
2025-07-06 17:59:17.721 | INFO     | __main__:main:93 - Era: 石器时代
2025-07-06 17:59:17.721 | INFO     | __main__:main:94 - World size: 64x64
2025-07-06 17:59:17.721 | INFO     | __main__:main:95 - Number of agents: 10
2025-07-06 17:59:17.721 | INFO     | __main__:main:96 - Turns: 1000
2025-07-06 17:59:17.722 | INFO     | __main__:run_simulation:120 - MCP client connected to world instance
2025-07-06 17:59:48.139 | INFO     | sociology_simulation.mcp_enhanced_llm:_execute_trinity_decisions:556 - Trinity created 0 terrains, 1 resources, 0 rules
2025-07-06 17:59:48.139 | INFO     | sociology_simulation.mcp_integration_patch:mcp_enhanced_generate_rules:310 - Trinity rules generated via MCP
2025-07-06 17:59:48.140 | INFO     | sociology_simulation.world:initialize:76 - 
========================================
2025-07-06 17:59:48.140 | INFO     | sociology_simulation.world:initialize:77 - INITIALIZING WORLD FOR ERA: 石器时代
2025-07-06 17:59:48.140 | INFO     | sociology_simulation.world:initialize:78 - TERRAIN TYPES: 
2025-07-06 17:59:48.140 | INFO     | sociology_simulation.world:initialize:79 - RESOURCE RULES:
2025-07-06 17:59:48.140 | INFO     | sociology_simulation.world:initialize:81 -   DISTRIBUTIONS::
2025-07-06 17:59:48.140 | INFO     | sociology_simulation.world:initialize:84 - ========================================

2025-07-06 17:59:48.140 | INFO     | sociology_simulation.world:generate_realistic_terrain:143 - Generating terrain using 'mixed' algorithm with seed 381399
2025-07-06 17:59:48.238 | ERROR    | sociology_simulation.world:generate_realistic_terrain:157 - Advanced terrain generation failed: list index out of range
2025-07-06 17:59:48.238 | INFO     | sociology_simulation.world:generate_realistic_terrain:158 - Falling back to simple terrain generation
